# 虚继承
虚继承是解决 C++ 多重继承问题的一种手段，从不同途径继承来的同一基类，会在子类中存在多份拷贝。这将存在两个问题：第一，浪费存储空间；第二，存在二义性问题。

针对这种情况，C++ 提供虚基类（virtual base class）的方法，使得在继承间接共同基类时只保留一份成员。方法如下：

```
class A    // 声明基类A
{
    // 代码
};
class B: virtual public A    // 声明类 B 是类 A 的公有派生类，A 是 B 的虚基类
{
    // 代码
};
class C: virtual public A    // 声明类 C 是类 A 的公有派生类，A 是 C 的虚基类
{
    // 代码
};
class D: public B, public C    // 类 D 中只有一份 A 的数据
{
    // 代码
};
```
【注意】虚基类并不是在声明基类时声明的，而是在声明派生类时，指定继承方式时声明的。因为一个基类可以在生成一个派生类时作为虚基类，而在生成另一个派生类时不作为虚基类。

问题：类 D 的构造函数通过初始化表调了虚基类的构造函数 A，而类 B 和类 C 的构造函数也通过初始化表调用了虚基类的构造函数 A，这样虚基类的构造函数岂非被调用了 3 次？
C++ 编译系统只执行最后的派生类对虚基类的构造函数的调用，而忽略虚基类的其他派生类（如类 B 和类 C）对虚基类的构造函数的调用，这就保证了虚基类的数据成员不会被多次初始化。

每个虚继承的子类都有一个虚基类表指针（占用一个指针的存储空间，4字节）和虚基类表（不占用类对象的存储空间）。虚基类表指针（virtual base table pointer）指向虚基类表（virtual table），
虚表中记录了虚基类与本类的偏移地址，通过偏移地址，就找到了虚基类成员。
